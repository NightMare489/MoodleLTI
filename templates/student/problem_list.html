{% extends "base.html" %}
{% block title %}Problems{% endblock %}
{% block content %}
<div class="container">
    <div class="page-header">
        <div>
            <h1>ğŸ† Problems</h1>
            {% if is_sheet %}
            <p class="subtitle">Problem Sheet â€” {{ solved_count }} / {{ total_count }} solved</p>
            {% endif %}
        </div>
    </div>

    {% if is_sheet %}
    <div class="card" style="padding:0.8rem 1.2rem; margin-bottom:1.2rem;">
        <div style="display:flex; align-items:center; gap:1rem; font-size:0.9rem;">
            <span style="white-space:nowrap; font-weight:600;">Score: {{ solved_count }} / {{ total_count }}</span>
            <div style="flex:1; height:8px; background:var(--bg-hover); border-radius:4px; overflow:hidden;">
                <div
                    style="height:100%; width:{{ (solved_count / total_count * 100) if total_count > 0 else 0 }}%; background:var(--green); border-radius:4px; transition:width 0.3s;">
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    {% if problems %}
    <div class="problem-grid">
        {% for p in problems %}
        <a href="{{ url_for('student.view_problem', problem_id=p.id) }}" class="problem-card">
            <div class="problem-card-header">
                <span class="problem-id">#{{ p.id }}</span>
                {% if p.user_best %}
                {% if p.user_best.verdict == 'AC' %}
                <span class="verdict verdict-AC">Solved âœ“</span>
                {% else %}
                <span class="verdict verdict-{{ p.user_best.verdict }}">{{ (p.user_best.score * 100)|int }}%</span>
                {% endif %}
                {% else %}
                <span class="verdict verdict-unsolved">Not attempted</span>
                {% endif %}
            </div>
            <h3 class="problem-card-title">{{ p.title }}</h3>
            <div class="problem-card-meta">
                <span>â± {{ p.time_limit_ms }}ms</span>
                <span>ğŸ’¾ {{ p.memory_limit_mb }}MB</span>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">ğŸ“š</div>
        <h3>No problems available</h3>
        <p>Check back later for new problems.</p>
    </div>
    {% endif %}
</div>
{% endblock %}